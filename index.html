<!--
宙の辻 - Sora no Tsuji
Copyright (c) 2026 Sora no Tsuji Project
Released under the MIT License.
-->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宙の辻 (Sora no Tsuji)</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

    <link rel="stylesheet" href="style.css">

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

    <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.min.js"></script>
</head>
<body>

    <div id="map"></div>

    <div id="control-panel" class="control-panel minimized">
        <div class="panel-header" onclick="togglePanel()">
            <span id="header-title">宙の辻<span class="header-subtitle"> - Sora no Tsuji</span></span>
            <span id="toggle-icon">▼</span>
        </div>
    
        <div id="panel-content" class="panel-content">
            
            <div class="section">
                <div class="section-header" onclick="toggleSection('sec-location')">
                    <span>位置情報</span> <span id="icon-sec-location">▲</span>
                </div>
                <div id="sec-location" class="section-content">
                    <div class="control-row">
                        <button id="btn-gps" class="nav-btn small" title="現在地を取得">GPS</button>
                        <input type="radio" name="loc-mode" id="radio-start" value="start" checked>
                        <input type="text" id="input-start-latlng" placeholder="出発地 (緯度,経度)">
                    </div>

                    <div class="control-row">
                        <div class="spacer-btn"></div>
                        <input type="radio" name="loc-mode" id="radio-end" value="end">
                        <input type="text" id="input-end-latlng" placeholder="目的地 (緯度,経度)">
                    </div>

                    <div class="control-row">
                        <div class="spacer-btn"></div>
                        <select id="select-dest">
                            <option value="">目的地を選択...</option>
                            <option value="35.360776,138.727299">富士山</option>
                            <option value="36.341944,137.6475">槍ヶ岳</option>
                            <option value="36.624444,137.746944">鹿島槍ヶ岳</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header" onclick="toggleSection('sec-datetime')">
                    <span>日時設定</span> <span id="icon-sec-datetime">▲</span>
                </div>
                <div id="sec-datetime" class="section-content">
                    <div class="control-row">
                        <button id="btn-now" class="nav-btn small">Now</button>
                        <button id="btn-date-prev" class="nav-btn">◀</button>
                        <input type="date" id="date-input">
                        <button id="btn-date-next" class="nav-btn">▶</button>
                    </div>

                    <div class="control-row">
                        <button id="btn-move" class="nav-btn small">Mov</button>
                        <button id="btn-time-prev" class="nav-btn">◀</button>
                        <input type="time" id="time-input" value="12:00">
                        <button id="btn-time-next" class="nav-btn">▶</button>
                    </div>

                    <input type="range" id="time-slider" min="0" max="1439" step="1" value="720">
                    
                    <div class="shortcuts">
                        <div class="shortcut-item">
                            <input type="radio" name="time-jump" id="jump-sunrise" value="sunrise">
                            <label for="jump-sunrise">🌞日の出 <span id="time-sunrise">--:--</span></label>
                        </div>
                        <div class="shortcut-item">
                            <input type="radio" name="time-jump" id="jump-sunset" value="sunset">
                            <label for="jump-sunset">🌞日の入 <span id="time-sunset">--:--</span></label>
                        </div>
                        <div class="shortcut-item">
                            <input type="radio" name="time-jump" id="jump-moonrise" value="moonrise">
                            <label for="jump-moonrise">🌛月の出 <span id="time-moonrise">--:--</span></label>
                        </div>
                        <div class="shortcut-item">
                            <input type="radio" name="time-jump" id="jump-moonset" value="moonset">
                            <label for="jump-moonset">🌛月の入 <span id="time-moonset">--:--</span></label>
                        </div>
                    </div>

                    <div class="control-row moon-row">
                        <button id="btn-moon-prev" class="nav-btn">◀</button>
                        <div class="moon-display">
                            <label>月齢</label>
                            <input type="number" id="moon-age-input" step="0.1" min="0" max="29.5">
                            <span id="moon-icon" class="moon-icon">🌑</span>
                        </div>
                        <button id="btn-moon-next" class="nav-btn">▶</button>
                    </div>
                </div>
            </div>
    
            <div class="section">
                <div class="section-header" onclick="toggleSection('sec-bodies')">
                    <span>表示天体</span> <span id="icon-sec-bodies">▲</span>
                </div>
                <div id="sec-bodies" class="section-content">
                    <ul id="celestial-list" class="celestial-list"></ul>
                </div>
            </div>

            <div class="panel-footer">
                &copy; 2026 Sora no Tsuji Project
            </div>
        </div>
    </div>
    
    <div id="style-palette" class="style-palette hidden">
        <div class="palette-header">スタイル設定 <span class="close-palette" onclick="closePalette()">×</span></div>
        <div class="palette-colors" id="palette-colors"></div>
        <div class="palette-lines" id="palette-lines">
            <div class="line-option" onclick="applyLineStyle('solid')">実線 <span class="line-preview solid"></span></div>
            <div class="line-option" onclick="applyLineStyle('dashed')">破線 <span class="line-preview dashed"></span></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>